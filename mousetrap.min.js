/* mousetrap v1.0 craig.is/killing/mice */
(function(h,n){var l=h.call(n,this),j=this.define;"function"==typeof j&&j.amd?j("mice",function(){return l}):this.Mousetrap=l}).call(this,function(h){function n(a,e,b){if(a.addEventListener)return a.addEventListener(e,b,!1);a.attachEvent("on"+e,b)}function l(a){a="number"==typeof a.which?a.which:a.keyCode;return 93==a||224==a?91:96<=a&&105>=a?a-48:a}function j(a){var a=a||{},e=!1,b;for(b in m)a[b]?e=!0:m[b]=0;e||(o=!1)}function s(a,e,b,c){var f,g,d,t=[];if(!i[a])return[];"keyup"==b&&(15<a&&19>a||
91==a)&&(e=[a]);for(f=0;f<i[a].length;++f)g=i[a][f],(d=g.seq)&&m[d]!=g.level||b==g.action&&e.sort().join(",")===g.modifiers.sort().join(",")&&(c&&i[a].splice(f,1),t.push(g));return t}function u(a,e,b){var c=b.target||b.srcElement,f=c.tagName;if(!(-1<(" "+c.className+" ").indexOf(" mousetrap ")?0:"INPUT"==f||"SELECT"==f||"TEXTAREA"==f)){for(var c=[],c=(b.shiftKey&&c.push(k.shift),b.altKey&&c.push(k.alt),b.ctrlKey&&c.push(k.ctrl),b.metaKey&&c.push(k.command),c),c=s(a,c,e),g={},d=!1,f=0;f<c.length;++f)if(c[f].seq)d=
!0,g[c[f].seq]=1,c[f].callback(b);else if(!d&&!o){c[f].callback(b);break}e==o&&!(15<a&&19>a||91==a)&&j(g)}}function z(a,e,b,c){m[a]=0;var f=function(){o=c;++m[a];A(v);v=w(j,1E3)},g=function(a){b(a);"keydown"===c&&(q=a.keyCode);w(j,10)},d;for(d=0;d<e.length;++d)x(e[d],d<e.length-1?f:g,c,a,d)}function x(a,e,b,c,f){var a=a.replace(/\s+/g," "),g=a.split(" "),d,h=[];if(1<g.length)return z(a,g,e,b);g="+"===a?["+"]:a.split("+");for(a=0;a<g.length;++a)d=g[a],y[d]&&(h.push(k.shift),d=y[d]),d=k[d]||d.toUpperCase().charCodeAt(0),
(15<d&&19>d||91==d)&&h.push(d);i[d]||(i[d]=[]);s(d,h,b,!c);i[d][c?"unshift":"push"]({callback:e,modifiers:h,action:b,seq:c,level:f})}for(var w=h.setTimeout,A=h.clearTimeout,h=h.document,k={backspace:8,tab:9,enter:13,"return":13,shift:16,ctrl:17,alt:18,option:18,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46,meta:91,command:91,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},y={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={},r={},m={},v,q=!1,o=!1,p=1;20>p;++p)k["f"+p]=111+p;return n(h,"keydown",function(a){u(l(a),"keydown",a)}),n(h,"keyup",function(a){q===a.keyCode?q=!1:u(l(a),"keyup",a)}),{bind:function(a,e,b){for(var b=b||"keydown",c=a instanceof Array?a:a.split(","),f=b,g=0;g<c.length;++g)x(c[g],e,f);r[a+":"+b]=e},trigger:function(a,e){r[a+":"+(e||"keydown")]()},reset:function(){i=
{};r={}}}});