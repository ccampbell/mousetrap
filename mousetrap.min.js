/* mousetrap v1.0 craig.is/killing/mice */
(function(h,p){var q=h.call(p,this),j=this.define;"function"==typeof j&&j.amd?j("mice",function(){return q}):this.Mousetrap=q}).call(this,function(h){function p(a){var b,c=!1,a=a||{};for(b in m)m.hasOwnProperty(b)&&(a[b]?c=!0:m[b]=0);c||(r=!1)}function q(a,b,c,g){var f,d,i,e=[];if(!k[a])return[];"keyup"==c&&(15<a&&19>a||91==a)&&(b=[a]);f=0;for(d=k[a].length;f<d;f++)if(i=k[a][f],!(i.seq&&m[i.seq]!=i.level)&&c==i.action){var l;a:{l=i.modifiers;var h=void 0,j=b.length;if(j!==l.length)l=!1;else{for(h=
0;h<j;h++)if(b[h]!==l[h]){l=!1;break a}l=!0}}l&&(g&&k[a].splice(f,1),e.push(i))}return e}function j(a,b){var c,g,f=u.hasOwnProperty(b.which)?u[b.which]:b.which,d;d=[];d=(b.shiftKey&&d.push(n.shift),b.altKey&&d.push(n.alt),b.ctrlKey&&d.push(n.ctrl),b.metaKey&&d.push(n.command),d);d=q(f,d,a);var i={},e=!1;c=b.target||b.srcElement;g=c.tagName;if(-1<(" "+c.className+" ").indexOf(" mousetrap ")||!("INPUT"==g||"SELECT"==g||"TEXTAREA"==g)){c=0;for(g=d.length;c<g;c++)if(d[c].seq)e=!0,i[d[c].seq]=1,d[c].callback.call(o,
b);else if(!e&&!r){d[c].callback.call(o,b);break}a==r&&!(15<f&&19>f||91==f)&&p(i)}}function z(a,b,c,g){var f,d,i=function(){r=g;m[a]++;A(v);v=w(p,1E3)},e=function(a){c.call(o,a);"keydown"===g&&(t=a.which);w(p,10)};f=m[a]=0;for(d=b.length;f<d;f++)x(b[f],f<d-1?i:e,g,a,f)}function x(a,b,c,g,f){var a=a.replace(/\s+/g," "),d,i,e;d=a.split(" ");var h=[];if(1<d.length)return z(a,d,b,c);i="+"===a?["+"]:a.split("+");a=0;for(d=i.length;a<d;a++)e=i[a],y[e]&&(h.push(n.shift),e=y[e]),e=n[e]||e.toUpperCase().charCodeAt(0),
(15<e&&19>e||91==e)&&h.push(e);k[e]||(k[e]=[]);q(e,h,c,!g);k[e][g?"unshift":"push"]({callback:b,modifiers:h,action:c,seq:g,level:f})}var w=h.setTimeout,A=h.clearTimeout,o=h.document,n={backspace:8,tab:9,enter:13,"return":13,shift:16,ctrl:17,alt:18,option:18,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46,meta:91,command:91,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,f1:112,f2:113,f3:114,f4:115,
f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={93:91,224:91,96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},k={},s={},m={},v,t=!1,r=!1,h=h.HTMLElement.prototype.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+
b,function(b){b.which=b.keyCode;c.call(a,b)})};return h(o,"keydown",function(a){j("keydown",a)}),h(o,"keyup",function(a){t===a.which?t=!1:j("keyup",a)}),{bind:function(a,b,c){var g,f,c=c||"keydown",a=a instanceof Array?a:a.split(",");g=0;for(f=a.length;g<f;g++)x(a[g],b,c);s[a+":"+c]=b},trigger:function(a,b){var c=a+":"+(b||"keydown");s.hasOwnProperty(c)&&s[c].call(o)},reset:function(){k={};s={}}}});