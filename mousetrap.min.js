/* mousetrap v1.3.2 craig.is/killing/mice */
(function(){function x(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function D(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return k[a.which]?k[a.which]:E[a.which]?E[a.which]:String.fromCharCode(a.which).toLowerCase()}function q(a,b){a=a||{};var c=!1,d;for(d in n)a[d]&&n[d]>b?c=!0:n[d]=0;c||(r=!1,p&&(N(s),p(s),s=[],p=null,m=[]))}function N(a){var b;for(b=0;b<a.length;++b)a[b].sort(function(a,b){return 1<a.length&&
1===b.length?-1:1===a.length&&1<b.length?1:a>b?1:-1}),a[b]=a[b].join("+")}function F(a,b,c,d,f){var h,e,G=[],g=c.type;if(!l[a])return[];"keyup"==g&&y(a)&&(b=[a]);for(h=0;h<l[a].length;++h)if(e=l[a][h],!(e.seq&&n[e.seq]!=e.level)&&g==e.action&&("keypress"==g&&!c.metaKey&&!c.ctrlKey||b.sort().join(",")===e.modifiers.sort().join(",")))d&&e.combo==f&&l[a].splice(h,1),G.push(e);return G}function z(a,b,c){if(!t.stopCallback(b,b.target||b.srcElement,c)&&!1===a(b,c))b.preventDefault&&b.preventDefault(),b.stopPropagation&&
b.stopPropagation(),b.returnValue=!1,b.cancelBubble=!0}function H(a){var b;for(b=0;b<m.length;++b)if(m[b]===a)return;m.push(a);1===a.length&&(A=!0)}function I(){s.push(m);m=[];A=!1;clearTimeout(u);u=setTimeout(q,1E3)}function B(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=D(a);if(b)if("keyup"==a.type&&C==b)C=!1;else{var c=[];a.shiftKey&&c.push("shift");a.altKey&&c.push("alt");a.ctrlKey&&c.push("ctrl");a.metaKey&&c.push("meta");var d=F(b,c,a),f,h={},e=0,g=!1;if(p)if("keydown"==a.type){1===
b.length&&A&&I();for(f=0;f<c.length;++f)H(c[f]);H(b)}else"keyup"==a.type&&0<m.length&&I();for(f=0;f<d.length;++f)d[f].seq?(g=!0,e=Math.max(e,d[f].level),h[d[f].seq]=1,z(d[f].callback,a,d[f].combo)):!g&&!r&&z(d[f].callback,a,d[f].combo);a.type==r&&!y(b)&&q(h,e)}}function y(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function J(a,b,c){if(!c){if(!v){v={};for(var d in k)95<d&&112>d||k.hasOwnProperty(d)&&(v[k[d]]=d)}c=v[a]?"keydown":"keypress"}"keypress"==c&&b.length&&(c="keydown");return c}function O(a,
b,c,d){n[a]=0;d||(d=J(b[0],[]));var f=function(){r=d;++n[a];clearTimeout(u);u=setTimeout(q,1E3)},h=function(b){z(c,b,a);"keyup"!==d&&(C=D(b));setTimeout(q,10)},e;for(e=0;e<b.length;++e)K(b[e],e<b.length-1?f:h,d,a,e)}function K(a,b,c,d,f){w[a+":"+c]=b;a=a.replace(/\s+/g," ");var h=a.split(" "),e,g,k=[];if(1<h.length)O(a,h,b,c);else{g="+"===a?["+"]:a.split("+");for(h=0;h<g.length;++h)e=g[h],L[e]&&(e=L[e]),c&&("keypress"!=c&&M[e])&&(e=M[e],k.push("shift")),y(e)&&k.push(e);c=J(e,k,c);l[e]||(l[e]=[]);
F(e,k,{type:c},!d,a);l[e][d?"unshift":"push"]({callback:b,modifiers:k,action:c,seq:d,level:f,combo:a})}}for(var k={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},M={"~":"`","!":"1","@":"2",
"#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},L={option:"alt",command:"meta","return":"enter",escape:"esc"},v,l={},w={},n={},u,C=!1,r=!1,s=[],p=null,m=[],A,g=1;20>g;++g)k[111+g]="f"+g;for(g=0;9>=g;++g)k[g+96]=g;x(document,"keypress",B);x(document,"keydown",B);x(document,"keyup",B);var t={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)K(a[d],b,c);return this},unbind:function(a,b){return t.bind(a,
function(){},b)},record:function(a){p=a},trigger:function(a,b){if(w[a+":"+b])w[a+":"+b]({},a);return this},reset:function(){l={};w={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable}};window.Mousetrap=t;"function"===typeof define&&define.amd&&define(t)})();
